import { Canvas, Meta, Story } from '@storybook/addon-docs'
import { useState, useEffect } from 'react'

import { Cache } from './Cache'

<Meta title="MDX/Cache" />

# Cache

<!-- add a plugin description -->

## Enable

<Canvas>
  <Story name="Enable">
    {() => {
      let [isOn, setIsOn] = useState(true)
      let [date, setDate] = useState(new Date())
      useEffect(() => {
        let interval = setInterval(() => {
          setDate(new Date())
        }, 1000)
        return () => {
          clearInterval(interval)
        }
      }, [])
      return (
        <>
          <Cache disabled={isOn}>Time: {date.toLocaleTimeString()}</Cache>
          <hr />
          <label className="yobta-menu-item">
            <input
              type="checkbox"
              value={isOn}
              className="yobta-switch"
              onClick={() => {
                setIsOn(last => !last)
              }}
            />{' '}
            Caching
          </label>
        </>
      )
    }}
  </Story>
</Canvas>
