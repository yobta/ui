import { Canvas, Meta, Story } from '@storybook/addon-docs'
import { useState, useEffect, useRef } from 'react'

import { matchElement } from './matchElement'

<Meta title="MDX/Helpers/Match Element" />

# Match Element Usage

<!-- add a plugin description -->

<Canvas>
  <Story name="Match Element Usage">
    {() => {
      const matchers = ['elem', '.elemClass', 'span']
      const elemRef = useRef(null)
      const elemRef2 = useRef(null)
      const [matchLog, setMatchLog] = useState(null)
      const [matchLog2, setMatchLog2] = useState(null)
      useEffect(() => {
        setMatchLog(elemRef.current)
        setMatchLog2(elemRef2.current)
        const elemCreated = document.createElement('div')
        elemCreated.className = 'elemClass'
        elemCreated.innerHTML = 'Element Created'
        document.body.append(elemCreated)
        const match = matchElement(elemCreated, matchers)
        console.log(match)
        const elemCreated2 = document.createElement('span')
        elemCreated2.className = 'elemClass2'
        elemCreated2.innerHTML = 'Element Created 2'
        document.body.append(elemCreated2)
        const match2 = matchElement(elemCreated2, matchers)
        console.log(match2)
      }, [])
      return (
        <>
          <div className="elemClass" ref={elemRef} style={{ display: 'none' }}>
            elem
          </div>
          <span
            className="elemClass2"
            ref={elemRef2}
            style={{ display: 'none' }}
          >
            elem
          </span>
          <div>
            <span className="font-bold">Description</span>
            <div className="p-2 pb-4">
              <p>***</p>
            </div>
          </div>
          <div>
            <span className="font-bold">Arguments</span>
            <div className="p-2 pb-4">
              <p className="ui-text-ink-secondary">
                element (HTMLElement | Null)
              </p>
              <p className="ui-text-ink-secondary">matchers (String[])</p>
            </div>
          </div>
          <div>
            <span className="font-bold">Returns</span>
            <p className="p-2 pb-4">
              <span className="ui-text-ink-secondary">Boolean</span>
            </p>
          </div>
          <span className="font-bold">Example</span>
          <div className="yobta-bg-paper-2 w-max p-4">
            <pre>
              <code>{`const elemCreated = document.createElement('div')
elemCreated.className = 'elemClass'
elemCreated.innerHTML = 'Element Created'
document.body.append(elemCreated)
const match = matchElement(elemCreated, matchers)`}</code>
              <p className="ui-text-color-14 p-4">// matchElem is </p>
              <code>{`const elemCreated2 = document.createElement('span')
elemCreated2.className = 'elemClass2'
elemCreated2.innerHTML = 'Element Created 2'
document.body.append(elemCreated2)
const match2 = matchElement(elemCreated2, matchers)`}</code>
              <p className="ui-text-color-14 p-4">// matchElem2 is </p>
            </pre>
          </div>
        </>
      )
    }}
  </Story>
</Canvas>
