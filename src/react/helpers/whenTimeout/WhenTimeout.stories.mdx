import { Canvas, Meta, Story } from '@storybook/addon-docs'
import { useEffect, useState } from 'react'

import { whenTimeout } from './whenTimeout.ts'

<Meta title="MDX/Helpers/When Timeout" />

# When Timeout

<!-- add a plugin description -->

<Canvas>
  <Story name="When Timeout Usage">
    {() => {
      let [state, setState] = useState('')
      let [style, setStyle] = useState('')
      useEffect(() => {
        let res = whenTimeout(5000)
          .then(() => {
            setState(state => (state += ', then time has run out'))
          })
          .catch(e => setState(`${e}`))
        setState(state => (state += 'the timer is started'))
      }, [])
      return (
        <div>
          <pre>
            <code>
              {`let variable = ""
let res = whenTimeout(5000)
  .then(
      () => variable += ",then time has run out"
    )
variable += "the timer is started"`}
            </code>
          </pre>
          <p>// variable = '{state}'</p>
        </div>
      )
    }}
  </Story>
</Canvas>
