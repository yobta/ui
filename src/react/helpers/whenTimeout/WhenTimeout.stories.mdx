import { Canvas, Meta, Story } from '@storybook/addon-docs'
import { useEffect, useState } from 'react'

import { whenTimeout } from './whenTimeout.ts'

<Meta title="MDX/Helpers/When Timeout" />

# When Timeout

<!-- add a plugin description -->

<Canvas>
  <Story name="When Timeout Usage">
    {() => {
      let [state, setState] = useState('the timer is started')
      let [style, setStyle] = useState('')
      useEffect(() => {
        let res = whenTimeout(5000)
          .then(() => {
            setState(state + ', then time has run out')
          })
          .catch(e => setState(`${e}`))
      }, [])
      return (
        <>
          <div>
            <pre>
              <code>
                {`let variable = ""
let res = whenTimeout(5000)
  .then(
      () => variable = variable + ",then time has run out"
    )
variable = variable + "the timer is started"`}
              </code>
            </pre>
            <p>// variable = '{state}'</p>
          </div>
        </>
      )
    }}
  </Story>
</Canvas>
