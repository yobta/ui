import { Canvas, Meta, Story } from '@storybook/addon-docs'
import { useEffect, useState } from 'react'

import { whenTimeout } from './whenTimeout.ts'

<Meta title="MDX/Helpers/When Timeout" />

# When Timeout

<!-- add a plugin description -->

<Canvas>
  <Story name="When Timeout Usage">
    {() => {
      let [state, setState] = useState('')
      let [style, setStyle] = useState('')
      useEffect(() => {
        let res = whenTimeout(1000)
          .then(() => {
            setState(state => (state += ', then time has run out'))
          })
          .catch(e => setState(`${e}`))
        setState(state => (state += 'the timer is started'))
      }, [])
      return (
        <>
          <div>
            Arguments
            <p className="p-2">
              <span className="ui-text-ink-secondary">number (Number)</span>:
              time interval in milliseconds
            </p>
          </div>
          <div>
            Returns
            <p className="p-2">
              <span className="ui-text-ink-secondary">void</span>
            </p>
          </div>
          <p>Example</p>
          <div className="yobta-bg-paper-2 w-max p-4">
            <pre>
              <code>
                {`let variable = ""
let res = whenTimeout(1000)
  .then(
      () => variable += ",then time has run out"
    )
variable += "the timer is started"`}
              </code>
            </pre>
            <p className="ui-text-color-14 p-4">// variable = '{state}'</p>
          </div>
        </>
      )
    }}
  </Story>
</Canvas>
